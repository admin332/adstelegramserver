

## Цель
Исправить отображение неверного курса TON в карточках сделок на странице "Мои сделки".

## Проблема

Каждый компонент `DealCard` вызывает свой собственный хук `useTonPrice()`, что приводит к:

1. **Множественным параллельным запросам** — 6 карточек = 6 запросов к edge function
2. **Race condition** — запросы завершаются в разное время, разные карточки получают разные значения
3. **Несогласованному состоянию** — одна карточка может получить `null`, другая — актуальный курс

`PaymentDialog` работает корректно, потому что монтируется позже (при клике) и его хук успевает получить данные.

## Решение

Поднять загрузку курса TON на уровень страницы `Deals.tsx` и передавать его через пропсы в каждую карточку.

## Изменения

### 1. `src/components/DealCard.tsx`

Заменить внутренний вызов `useTonPrice()` на получение `usdEquivalent` через пропсы:

```text
Было:
  const { convertToUsd } = useTonPrice();
  const usdEquivalent = convertToUsd(totalPrice);

Будет:
  // usdEquivalent приходит как проп
  interface DealCardProps {
    ...
    usdEquivalent: number | null;  // новый проп
  }
```

### 2. `src/pages/Deals.tsx`

Загрузить курс один раз на уровне страницы и передать в каждую карточку:

```tsx
const { convertToUsd } = useTonPrice();

// В рендере:
<DealCard 
  ...
  usdEquivalent={convertToUsd(deal.total_price)}
/>
```

## Преимущества

- Один запрос вместо N (по количеству карточек)
- Все карточки показывают одинаковый курс
- Меньше нагрузки на edge function
- Согласованное отображение данных

## Файлы для изменения

| Файл | Действие |
|------|----------|
| `src/components/DealCard.tsx` | Добавить проп `usdEquivalent`, убрать вызов `useTonPrice()` |
| `src/pages/Deals.tsx` | Добавить `useTonPrice()`, передавать `usdEquivalent` в карточки |

