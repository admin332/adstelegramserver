

## –¶–µ–ª—å
–£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã: —É–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –ø—Ä—è–º–æ–π –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ TonConnect

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ `src/components/channel/PaymentStep.tsx`

### –ß—Ç–æ —É–±–∏—Ä–∞–µ–º

1. **–°–µ–∫—Ü–∏—è "–í–∞—à –∫–æ—à–µ–ª—ë–∫"** (—Å—Ç—Ä–æ–∫–∏ 128-134):
```tsx
// –£–î–ê–õ–ò–¢–¨:
<div className="bg-secondary/30 rounded-xl p-3 text-center">
  <p className="text-xs text-muted-foreground">–í–∞—à –∫–æ—à–µ–ª—ë–∫</p>
  <p className="font-mono text-sm">
    {walletAddress?.slice(0, 8)}...{walletAddress?.slice(-6)}
  </p>
</div>
```

2. **–¢–µ–∫—Å—Ç "–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –∞–¥—Ä–µ—Å —ç—Å–∫—Ä–æ—É"** (—Å—Ç—Ä–æ–∫–∏ 95-97)

### –ß—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º/–º–µ–Ω—è–µ–º

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ —Å –∞–¥—Ä–µ—Å–æ–º**: "–í—Ä–µ–º–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å —ç—Å–∫—Ä–æ—É"

2. **–ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å"** —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π TonConnect:
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useTonConnectUI` hook
   - –í—ã–∑—ã–≤–∞–µ—Ç `tonConnectUI.sendTransaction()` —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å—É–º–º–æ–π –∏ –∞–¥—Ä–µ—Å–æ–º
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç TON –≤ nanoTON (—É–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ 10^9)

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ UI

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        –ö –æ–ø–ª–∞—Ç–µ                 ‚îÇ
‚îÇ     üíé 50 TON                   ‚îÇ
‚îÇ       ‚âà $152                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –í—Ä–µ–º–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å —ç—Å–∫—Ä–æ—É        ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ EQxyz...abc123        [üìã] ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ      –û—Ç–∫—Ä—ã—Ç—å –≤ —ç–∫—Å–ø–ª–æ—Ä–µ—Ä–µ       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Å—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç...  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          üí≥ –û–ø–ª–∞—Ç–∏—Ç—å            ‚îÇ  ‚Üê –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –∫–æ—à–µ–ª—å–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           –Ø –æ–ø–ª–∞—Ç–∏–ª             ‚îÇ  ‚Üê –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ò–º–ø–æ—Ä—Ç—ã
```typescript
import { useTonConnectUI } from '@tonconnect/ui-react';
```

### –§—É–Ω–∫—Ü–∏—è –æ–ø–ª–∞—Ç—ã
```typescript
const [tonConnectUI] = useTonConnectUI();

const handlePayViaWallet = async () => {
  if (!escrowAddress) return;
  
  // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è TON –≤ nanoTON (1 TON = 10^9 nanoTON)
  const amountNano = (totalPriceTon * 1_000_000_000).toString();
  
  const transaction = {
    validUntil: Math.floor(Date.now() / 1000) + 600, // 10 –º–∏–Ω—É—Ç
    messages: [
      {
        address: escrowAddress,
        amount: amountNano,
      }
    ]
  };
  
  try {
    await tonConnectUI.sendTransaction(transaction);
    toast.success('–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!');
    onPaymentComplete();
  } catch (error) {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –∏–ª–∏ –æ—à–∏–±–∫–∞
    console.error('Transaction error:', error);
  }
};
```

### –ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏
```tsx
{/* –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –∫–æ—à–µ–ª—ë–∫ */}
<Button onClick={handlePayViaWallet} className="w-full h-12 text-base font-semibold">
  <Wallet className="w-5 h-5 mr-2" />
  –û–ø–ª–∞—Ç–∏—Ç—å
</Button>

{/* –ö–Ω–æ–ø–∫–∞ "–Ø –æ–ø–ª–∞—Ç–∏–ª" –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç */}
<Button 
  onClick={onPaymentComplete} 
  variant="outline"
  className="w-full h-12 text-base"
>
  –Ø –æ–ø–ª–∞—Ç–∏–ª –≤—Ä—É—á–Ω—É—é
</Button>
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
1. –í–∏–¥–∏—Ç —Å—É–º–º—É –∫ –æ–ø–ª–∞—Ç–µ
2. –í–∏–¥–∏—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å —ç—Å–∫—Ä–æ—É (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å)
3. –ù–∞–∂–∏–º–∞–µ—Ç "–û–ø–ª–∞—Ç–∏—Ç—å" ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤—ã–±–æ—Ä –∫–æ—à–µ–ª—å–∫–∞ TonConnect
4. –í—ã–±–∏—Ä–∞–µ—Ç –∫–æ—à–µ–ª—ë–∫ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ —Å —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Å—É–º–º–æ–π –∏ –∞–¥—Ä–µ—Å–æ–º
5. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ –∫–æ—à–µ–ª—å–∫–µ

