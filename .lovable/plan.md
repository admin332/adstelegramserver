
# ะะพะฑะฐะฒะปะตะฝะธะต ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ะบะฐะผะฟะฐะฝะธะน

## ะะฑะทะพั

ะะพะฑะฐะฒะปัะตะผ ะธะบะพะฝะบั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั (ะบะฐัะฐะฝะดะฐั) ััะดะพะผ ั ะธะบะพะฝะบะพะน ัะดะฐะปะตะฝะธั ะฒ ัะฟะธัะบะต "ะะพะธ ะบะฐะผะฟะฐะฝะธะธ". ะัะธ ะฝะฐะถะฐัะธะธ:
- ะัะพะฒะตััะตััั, ะตััั ะปะธ ะฐะบัะธะฒะฝัะต ัะดะตะปะบะธ ะฟะพ ััะพะน ะบะฐะผะฟะฐะฝะธะธ
- ะัะปะธ ะตััั โ ะฟะพะบะฐะทัะฒะฐะตะผ ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต
- ะัะปะธ ะฝะตั โ ะพัะบััะฒะฐะตะผ ัะพัะผั ัะพะทะดะฐะฝะธั ั ะฟัะตะดะทะฐะฟะพะปะฝะตะฝะฝัะผะธ ะดะฐะฝะฝัะผะธ

## ะะทะผะตะฝะตะฝะธั

### 1. ะกะพะทะดะฐะฝะธะต ััะบะฐ ะดะปั ะฟัะพะฒะตัะบะธ ะฐะบัะธะฒะฝัั ัะดะตะปะพะบ

**ะะพะฒัะน ัะฐะนะป:** `src/hooks/useCampaignActiveDeals.ts`

```tsx
export function useCampaignActiveDeals() {
  return useMutation({
    mutationFn: async (campaignId: string) => {
      // ะัะทะพะฒ edge function ะดะปั ะฟัะพะฒะตัะบะธ ะฐะบัะธะฒะฝัั ัะดะตะปะพะบ
      // ะะพะทะฒัะฐัะฐะตั { hasActiveDeals: boolean }
    }
  });
}
```

### 2. ะกะพะทะดะฐะฝะธะต Edge Function ะดะปั ะฟัะพะฒะตัะบะธ ัะดะตะปะพะบ

**ะะพะฒัะน ัะฐะนะป:** `supabase/functions/check-campaign-deals/index.ts`

ะัะพะฒะตััะตั ะฝะฐะปะธัะธะต ัะดะตะปะพะบ ัะพ ััะฐัััะฐะผะธ `pending`, `escrow`, `in_progress` ะดะปั ัะบะฐะทะฐะฝะฝะพะน ะบะฐะผะฟะฐะฝะธะธ.

### 3. ะกะพะทะดะฐะฝะธะต Edge Function ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั ะบะฐะผะฟะฐะฝะธะธ

**ะะพะฒัะน ัะฐะนะป:** `supabase/functions/update-campaign/index.ts`

ะะฑะฝะพะฒะปัะตั ะดะฐะฝะฝัะต ะบะฐะผะฟะฐะฝะธะธ (ะฝะฐะทะฒะฐะฝะธะต, ัะตะบัั, ะผะตะดะธะฐ, ะบะฝะพะฟะบั) ั ะฟัะพะฒะตัะบะพะน ะฒะปะฐะดะตะปััะฐ ัะตัะตะท initData.

### 4. ะะพะดะธัะธะบะฐัะธั MyCampaignsList

**ะคะฐะนะป:** `src/components/create/MyCampaignsList.tsx`

ะะพะฑะฐะฒะปัะตะผ:
- ะะผะฟะพัั ะธะบะพะฝะบะธ `Pencil`
- ะะฝะพะฟะบั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ััะดะพะผ ั ะบะฝะพะฟะบะพะน ัะดะฐะปะตะฝะธั
- ะะฑัะฐะฑะพััะธะบ `handleEdit` ั ะฟัะพะฒะตัะบะพะน ะฐะบัะธะฒะฝัั ัะดะตะปะพะบ
- ะัะทะพะฒ `onEditCampaign` ะฟัะธ ััะฟะตัะฝะพะน ะฟัะพะฒะตัะบะต

```tsx
// ะะพะฒะฐั ััััะบัััะฐ ัััะตัะฐ ะบะฐััะพัะบะธ:
<div className="flex items-center gap-2 pt-2 border-t border-secondary">
  <span>ะะพัะพะฒัะน ะฟะพัั</span>
  {campaign.button_text && <span>ะะฝะพะฟะบะฐ: ...</span>}
  <div className="flex-1" />
  
  {/* ะะฝะพะฟะบะฐ ัะตะดะฐะบัะธัะพะฒะฐะฝะธั */}
  <Button variant="ghost" size="sm" onClick={() => handleEdit(campaign)}>
    <Pencil className="w-4 h-4" />
  </Button>
  
  {/* ะะฝะพะฟะบะฐ ัะดะฐะปะตะฝะธั */}
  <AlertDialog>...</AlertDialog>
</div>
```

### 5. ะะพะดะธัะธะบะฐัะธั ะธะฝัะตััะตะนัะฐ MyCampaignsList

**ะคะฐะนะป:** `src/components/create/MyCampaignsList.tsx`

```tsx
interface MyCampaignsListProps {
  onAddCampaign: () => void;
  onEditCampaign: (campaign: UserCampaign) => void;  // ะะะะซะ ะะะะ
  onBack: () => void;
}
```

### 6. ะะพะดะธัะธะบะฐัะธั CreateCampaignForm ะดะปั ัะตะถะธะผะฐ ัะตะดะฐะบัะธัะพะฒะฐะฝะธั

**ะคะฐะนะป:** `src/components/create/CreateCampaignForm.tsx`

ะะพะฑะฐะฒะปัะตะผ:
- ะะฟัะธะพะฝะฐะปัะฝัะน ะฟัะพะฟ `editingCampaign?: UserCampaign`
- ะัะตะดะทะฐะฟะพะปะฝะตะฝะธะต ัะพัะผั ะดะฐะฝะฝัะผะธ ะบะฐะผะฟะฐะฝะธะธ ะฟัะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธะธ
- ะะทะผะตะฝะตะฝะธะต ัะตะบััะฐ ะบะฝะพะฟะบะธ: "ะกะพััะฐะฝะธัั" ะฒะผะตััะพ "ะกะพะทะดะฐัั"
- ะัะทะพะฒ `update-campaign` ะฒะผะตััะพ `create-campaign` ะฟัะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธะธ

```tsx
interface CreateCampaignFormProps {
  onBack: () => void;
  onComplete: () => void;
  editingCampaign?: UserCampaign;  // ะะะะซะ ะะะะ
}
```

### 7. ะะพะดะธัะธะบะฐัะธั Create.tsx

**ะคะฐะนะป:** `src/pages/Create.tsx`

ะะพะฑะฐะฒะปัะตะผ:
- ะกะพััะพัะฝะธะต `editingCampaign`
- ะะฑัะฐะฑะพััะธะบ `handleEditCampaign` 
- ะะตัะตะดะฐัะฐ ะบะฐะผะฟะฐะฝะธะธ ะฒ `CreateCampaignForm`

```tsx
const [editingCampaign, setEditingCampaign] = useState<UserCampaign | null>(null);

const handleEditCampaign = (campaign: UserCampaign) => {
  setEditingCampaign(campaign);
  setCurrentStep("form");
};
```

### 8. ะะพะฑะฐะฒะปะตะฝะธะต ััะบะฐ ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั ะบะฐะผะฟะฐะฝะธะธ

**ะคะฐะนะป:** `src/hooks/useUserCampaigns.ts`

```tsx
export function useUpdateCampaign() {
  return useMutation({
    mutationFn: async (data: UpdateCampaignData) => {
      // ะัะทะพะฒ update-campaign edge function
    }
  });
}
```

## ะะพะณะธะบะฐ ะฟัะพะฒะตัะบะธ ะฐะบัะธะฒะฝัั ัะดะตะปะพะบ

ะกัะฐัััั ัะดะตะปะพะบ, ะฑะปะพะบะธััััะธะต ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต:
- `pending` โ ะพะถะธะดะฐะตั ะพะฟะปะฐัั
- `escrow` โ ะดะตะฝัะณะธ ะฒ ััะบัะพั
- `in_progress` โ ะฒัะฟะพะปะฝัะตััั

ะัะธ ะฟะพะฟััะบะต ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ะฟะพะบะฐะทัะฒะฐะตะผ toast:
> "ะะฐะผะฟะฐะฝะธั ะธัะฟะพะปัะทัะตััั ะฒ ะฐะบัะธะฒะฝัั ัะดะตะปะบะฐั ะธ ะฝะต ะผะพะถะตั ะฑััั ะธะทะผะตะฝะตะฝะฐ"

## UI/UX

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [๐ท]  ะะฐะทะฒะฐะฝะธะต ะบะฐะผะฟะฐะฝะธะธ                          โ
โ       ะขะตะบัั ะบะฐะผะฟะฐะฝะธะธ...                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ะะพัะพะฒัะน ะฟะพัั   ะะฝะพะฟะบะฐ: ะะพะดัะพะฑะฝะตะต   โ๏ธ   ๐๏ธ       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                      โ     โ
                               ะะตะดะฐะบัะธัะพะฒะฐัั  ะฃะดะฐะปะธัั
```

## ะคะฐะนะปั ะดะปั ะธะทะผะตะฝะตะฝะธั

| ะคะฐะนะป | ะะตะนััะฒะธะต |
|------|----------|
| `src/components/create/MyCampaignsList.tsx` | ะะพะฑะฐะฒะธัั ะบะฝะพะฟะบั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั |
| `src/components/create/CreateCampaignForm.tsx` | ะะพะดะดะตัะถะบะฐ ัะตะถะธะผะฐ ัะตะดะฐะบัะธัะพะฒะฐะฝะธั |
| `src/pages/Create.tsx` | ะกะพััะพัะฝะธะต ัะตะดะฐะบัะธััะตะผะพะน ะบะฐะผะฟะฐะฝะธะธ |
| `src/hooks/useUserCampaigns.ts` | ะฅัะบะธ ะดะปั ะฟัะพะฒะตัะบะธ ะธ ะพะฑะฝะพะฒะปะตะฝะธั |
| `supabase/functions/check-campaign-deals/index.ts` | ะะพะฒะฐั edge function |
| `supabase/functions/update-campaign/index.ts` | ะะพะฒะฐั edge function |
