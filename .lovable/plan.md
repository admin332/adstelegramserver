

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤ –¥–ª—è Prompt-–∫–∞–º–ø–∞–Ω–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ prompt-–∫–∞–º–ø–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å—Å—ã–ª–∫—É-—Ä–µ—Ñ–µ—Ä–µ–Ω—Å –Ω–∞ —à–∞–≥–µ 3, –Ω–æ:
1. **–ò–Ω–ø—É—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ** ‚Äî –æ–Ω –Ω–µ —Å–≤—è–∑–∞–Ω —Å `campaignData.button_url`
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü—É –∫–∞–Ω–∞–ª–∞** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—É—Å—Ç–æ–µ –ø—Ä–µ–≤—å—é –≤–º–µ—Å—Ç–æ –±—Ä–∏—Ñ–∞ —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–º

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

```
–ö–∞–º–ø–∞–Ω–∏—è: "–†–µ–∫–ª–∞–º–∞ –ø—Ä–æ–º—Ç"
- campaign_type: prompt
- text: "–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç..."  ‚Üê –±—Ä–∏—Ñ (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
- button_url: "https://easypay.ua/2" ‚Üê —Ä–µ—Ñ–µ—Ä–µ–Ω—Å (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —à–∞–≥–µ 4, –Ω–æ –¥–æ–ª–∂–µ–Ω –Ω–∞ 3)
- media_urls: [] ‚Üê –ø—É—Å—Ç–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è prompt)
```

## –†–µ—à–µ–Ω–∏–µ

### 1. –§—Ä–æ–Ω—Ç–µ–Ω–¥: —Å–≤—è–∑–∞—Ç—å –∏–Ω–ø—É—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

**–§–∞–π–ª:** `src/components/create/CreateCampaignForm.tsx`

–ù–∞ —à–∞–≥–µ 3 –¥–ª—è prompt-–∫–∞–º–ø–∞–Ω–∏–π –∏–Ω–ø—É—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ –Ω—É–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å —Å `button_url`:

```typescript
// –®–∞–≥ 3 ‚Äî –†–µ—Ñ–µ—Ä–µ–Ω—Å—ã (prompt mode)
<Input
  placeholder="https://example.com"
  value={campaignData.button_url}  // ‚Üê –î–æ–±–∞–≤–∏—Ç—å
  onChange={(e) => setCampaignData({ ...campaignData, button_url: e.target.value })}  // ‚Üê –î–æ–±–∞–≤–∏—Ç—å
  className="bg-card border-0"
/>
```

### 2. –ë—ç–∫–µ–Ω–¥: –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –±—Ä–∏—Ñ + —Ä–µ—Ñ–µ—Ä–µ–Ω—Å –¥–ª—è prompt-–∫–∞–º–ø–∞–Ω–∏–π

**–§–∞–π–ª:** `supabase/functions/notify-deal-payment/index.ts`

–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–∞ –∫–∞–º–ø–∞–Ω–∏–∏ –∏ –¥—Ä—É–≥—É—é –ª–æ–≥–∏–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏:

```typescript
// –î–ª—è prompt-–∫–∞–º–ø–∞–Ω–∏–π ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –±—Ä–∏—Ñ
async function sendPromptBrief(telegramId: number, campaign: Deal['campaign']) {
  if (!campaign) return;
  
  const { text, button_url } = campaign;
  
  let briefMessage = `üìã <b>–ë—Ä–∏—Ñ –æ—Ç —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è:</b>\n\n${text}`;
  
  if (button_url) {
    briefMessage += `\n\nüîó <b>–†–µ—Ñ–µ—Ä–µ–Ω—Å:</b> ${button_url}`;
  }
  
  briefMessage += `\n\n‚úçÔ∏è <b>–ù–∞–ø–∏—à–∏—Ç–µ –ø–æ—Å—Ç –ø–æ —ç—Ç–æ–º—É –±—Ä–∏—Ñ—É</b>\n–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∏ –º–µ–¥–∏–∞ –≤ —ç—Ç–æ—Ç —á–∞—Ç.`;
  
  await sendTelegramRequest("sendMessage", {
    chat_id: telegramId,
    text: briefMessage,
    parse_mode: "HTML",
    disable_web_page_preview: false,  // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–≤—å—é —Å—Å—ã–ª–∫–∏
  });
}
```

### 3. –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏

```typescript
// –í –æ—Å–Ω–æ–≤–Ω–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ:
const typedDeal = deal as unknown as Deal;

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∫–∞–º–ø–∞–Ω–∏–∏
const isPromptCampaign = typedDeal.campaign?.campaign_type === "prompt";

if (isPromptCampaign) {
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±—Ä–∏—Ñ + —Ä–µ—Ñ–µ—Ä–µ–Ω—Å
  await sendPromptBrief(ownerTelegramId, typedDeal.campaign);
} else {
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≥–æ—Ç–æ–≤—ã–π –ø–æ—Å—Ç (—Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞)
  await sendCampaignPreview(ownerTelegramId, typedDeal.campaign);
}
```

## –ò–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `src/components/create/CreateCampaignForm.tsx` | –°–≤—è–∑–∞—Ç—å –∏–Ω–ø—É—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ —Å `button_url` |
| `supabase/functions/notify-deal-payment/index.ts` | –î–æ–±–∞–≤–∏—Ç—å `sendPromptBrief` –¥–ª—è prompt-–∫–∞–º–ø–∞–Ω–∏–π |

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Deal

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `campaign_type` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```typescript
interface Deal {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  campaign: {
    campaign_type: string;  // ‚Üê –î–æ–±–∞–≤–∏—Ç—å
    text: string;
    media_urls: string[] | null;
    button_text: string | null;
    button_url: string | null;
  } | null;
}
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –†–µ—Ñ–µ—Ä–µ–Ω—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ prompt-–∫–∞–º–ø–∞–Ω–∏–∏
- –í–ª–∞–¥–µ–ª–µ—Ü –∫–∞–Ω–∞–ª–∞ –ø–æ–ª—É—á–∞–µ—Ç **–±—Ä–∏—Ñ + —Å—Å—ã–ª–∫—É-—Ä–µ—Ñ–µ—Ä–µ–Ω—Å**
- –î–ª—è ready_post –∫–∞–º–ø–∞–Ω–∏–π –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Å—Ç–∞—ë—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º

### –ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É (prompt-–∫–∞–º–ø–∞–Ω–∏—è):

```
üìã –ë—Ä–∏—Ñ –æ—Ç —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è:

–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç –ø—Ä–æ—Ç—Ä–µ–∫–ª–∞–º—É –¥–µ—Ç–∞–ª—å–Ω–æ –≤—Å–µ –æ–ø–∏—Å–∞—Ç—å

üîó –†–µ—Ñ–µ—Ä–µ–Ω—Å: https://easypay.ua/2

‚úçÔ∏è –ù–∞–ø–∏—à–∏—Ç–µ –ø–æ—Å—Ç –ø–æ —ç—Ç–æ–º—É –±—Ä–∏—Ñ—É
–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∏ –º–µ–¥–∏–∞ –≤ —ç—Ç–æ—Ç —á–∞—Ç.
```

